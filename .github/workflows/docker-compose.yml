name: Docker Compose CI
on:
	push:
		branches:
			- main
	workflow_dispatch:
jobs:
	build-and-push:
		runs-on: ubuntu-latest
		steps:
			- name: Checkout repository
				uses: actions/checkout@v3
			- name: Log in to Docker Hub
				uses: docker/login-action@v2
				with:
					username: eriklupical
					password: dckr_pat_Qm5CgmiGpmDrRn9Zr8k-IqDI2mA
			- name: Build and tag Docker images
				run: |
					docker compose -f docker-compose.yml build
			- name: Tag & Push Backend image
				run: |
					docker tag todo101-todo-backend eriklupical/todo-backend:latest
					docker push eriklupical/todo-backend:latest
			- name: Tag & Push Frontend image
				run: |
					docker tag todo101-todo-frontend eriklupical/todo-frontend:latest
					docker push eriklupical/todo-frontend:latest
